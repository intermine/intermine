<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD Simplified DocBook XML V1.0//EN"
"http://www.oasis-open.org/docbook/xml/simple/1.0/sdocbook.dtd">
<article>
  <articleinfo>
    <date>2003-06-30</date>

    <title>Basic database creation tutorial</title>
  </articleinfo>

  <para>The tutorial demonstrates how to create a database of your own using
  the intermine software, and assumes that you have created the tutorial
  model.</para>

  <orderedlist>
    <listitem>
      <para>Create a database using PosgreSQL and assign it a name of your
      choice - this will be referred to as 'yourdb'.</para>
    </listitem>

    <listitem>
      <para>Determine how your data is related e.g. Each gene has one or many
      exons etc...</para>
    </listitem>

    <listitem>
      <para>Once the relationships are determined create a UML diagram using
      ArgoUML, an example is included in
      <command>model/testmodel.zargo</command>. Here are some pointers for
      using ArgoUML to create a model:</para>

      <orderedlist>
        <listitem>
          <para>To define the properties of the attributes of your classes you
          must physically select that property even though it may be
          preselected. For example if the propety you are setting is the type
          - 'String' then you must select 'String' from the dropdown list. It
          will be apparent that you have done this because the property will
          now be displayed in your uml diagram i.e. "name" will become "name :
          String".</para>
        </listitem>

        <listitem>
          <para>All attributes must be set to protected in the properties. The
          UML will now show "#name : String".</para>
        </listitem>

        <listitem>
          <para>The type of each attribute must be selected from the range at
          the bottom of the list, (see below) with the exception of 'String'
          you must not use ArgoUML's own types.</para>

          <mediaobject>
            <imageobject>
              <imagedata fileref="argotype.gif" />
            </imageobject>
          </mediaobject>
        </listitem>
      </orderedlist>
    </listitem>

    <listitem>
      <para>The data will need to be extracted from the file it is currently
      stored in and put into a format that the InterMine software can use -
      this is either XML or Java objects. It is recommended that you write a
      program using java to perform this task. In this program you should add
      in the code fom the example included here:
      <command>src/java/org/intermine/tutorial/SimpleDataLoader</command>. The
      example demonstrates how to read and write to the database using the
      objectstore writer.</para>
    </listitem>

    <listitem>
      <para>Personalise the settings in the InterMine program files to
      accomodate your data:</para>

      <orderedlist>
        <listitem>
          <para>In the tutorial directory, modify the
          <command>intermine.properties</command> configuration file using any
          simple text editor you are comfortable with (e.g. emacs or notepad).
          The modifications should contain your database username (and
          password if necessary), and the name of your database should replace
          the tutorial one on the following line
          <command>db.tutorial.datasource.databaseName=tutorial</command> to
          become
          <command>db.tutorial.datasource.databaseName=yourdb</command>.</para>
        </listitem>

        <listitem>
          <para>Also in the <command>intermine.properties</command> file the
          line
          <command>os.tutorial.model=<literal>tutorial</literal></command>
          should be changed so that it equals the name of your ArgoUML
          model.</para>
        </listitem>

        <listitem>
          <para>In <command>build.xml</command> you need to follow the
          instructions on how to build a model from a zargo file in the code
          comments and using the comment marks comment out the
          <command>build-from-xml-model</command> area of code.</para>

          <mediaobject>
            <imageobject>
              <imagedata fileref="build.gif" />
            </imageobject>
          </mediaobject>
        </listitem>

        <listitem>
          <para>Back in <command>build.xml</command> the <command>insert data
          into the database</command> section now needs to be changed: First
          you must change the depends statement at the top of the target (see
          below). It should now read <command> depends="build-model,
          compile"</command>.</para>
        </listitem>

        <listitem>
          <para>The rest of that target now needs to be modified to accept the
          data from the java program you have created. Below is an exampe of
          how to do this, but obviously this will be specific to your
          programs.</para>

          <mediaobject>
            <imageobject>
              <imagedata fileref="insert.gif" />
            </imageobject>
          </mediaobject>
        </listitem>
      </orderedlist>
    </listitem>

    <listitem>
      <para>The final step is to enter on the command line <command>ant clean
      run</command>. The build should be successful, however you may get a
      compile error for <command>SimpleQuery</command> as this test will no
      longer work with your database.</para>
    </listitem>

    <listitem>
      <para>You should now find all your data has been entered into
      yourdb.</para>
    </listitem>
  </orderedlist>
</article>
