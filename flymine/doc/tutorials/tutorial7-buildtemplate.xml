<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD Simplified DocBook XML V1.0//EN"
"http://www.oasis-open.org/docbook/xml/simple/1.0/sdocbook.dtd">
<article>
  <section>
    <title>Tutorial 7: Building a template</title>

    <para>Any query that has been built using the FlyMine QueryBuilder
    (see <ulink url="tutorial6-QB.xml">Tutorial 6</ulink>) can
    be saved as a template query, as long as it includes at least one
    editable constraint. In order to build a template you need to be
    logged-in to FlyMine. Templates that you create yourself are
    saved to your 'MyMine'.</para>

    <para>This tutorial will show you how to build a new template. As
    an example, we will make a template starting from the query
    created in <ulink url="tutorial6-QB.xml">Tutorial 6</ulink>:
    'Show all genes on the 4th chromosome of <emphasis>Drosophila
    melanogaster</emphasis>'. After building the query 'Show all genes
    on the 4th chromosome of <emphasis>Drosophila
    melanogaster</emphasis>' (see <ulink
    url="tutorial6-QB.xml">Tutorial 6</ulink>), while being
    logged-in, scroll down and click on 'Start building a template
    query'.</para>

        <mediaobject>
          <imageobject>
            <imagedata fileref="buildtemp-start.png" />
          </imageobject><textobject><phrase> </phrase></textobject>
        </mediaobject>

    <para>In order to save a query as a template it is necessary to
        define which of the constraints in the query will be editable
        in the template (there must be at least one 'editable'
        constraint in the query).  To make a constraint editable
        within a template, click on the lock next to the constraint: A
        field with 'Template constraint settings' will appear in the
        right column. Click in the tick-box next to 'Editable'. At the
        same time, it is possible to add a label to the editable
        constraint (optional) to clarify what it is by typing in a
        label in 'Constraint label'. Click on the 'Update' button in
        this field. The label will appear on the template page after
        creating the template (see below).</para>
 
        <mediaobject>
          <imageobject>
            <imagedata fileref="buildtemp-edit.png" />
          </imageobject><textobject><phrase> </phrase></textobject>
        </mediaobject>

   <para>An editable constraint will have an open lock in the
   constraint list, whereas the lock of a constraint that cannot be
   edited will appear locked. The label of the editable constraint
   will appear below the constraint, in italics.</para>

      <mediaobject>
          <imageobject>
            <imagedata fileref="buildtemp-label.png" />
          </imageobject><textobject><phrase> </phrase></textobject>
        </mediaobject>

    <para>If no label was added after a constraint was made editable,
    'no label' will appear under the constraint. Clicking on 'no
    label' allows you to add a label. Click on 'Update' to implement
    the change.</para>

        <mediaobject>
          <imageobject>
            <imagedata fileref="buildtemp-nolabel.png" />
          </imageobject><textobject><phrase> </phrase></textobject>
        </mediaobject>

    <para>Each new template requires a name and a description. The
    description will appear on the template page and in your list of
    template queries, after creating the template (see
    below). Therefore, it should provide as much information as
    possible about what the template will do. Moreover, it should be
    distinguishable from other template queries. After filling the
    'Name' and 'Description' boxes, click on 'Update settings' below
    the boxes.</para>

        <mediaobject>
          <imageobject>
            <imagedata fileref="buildtemp-name.png" />
          </imageobject><textobject><phrase> </phrase></textobject>
        </mediaobject>


    <para>Before creating a template, preview the template and make
    any changes, if necessary. To save this query as a template, click
    on 'Save template'.</para>

       <mediaobject>
          <imageobject>
            <imagedata fileref="buildtemp-preview.png" />
          </imageobject><textobject><phrase> </phrase></textobject>
        </mediaobject>

    <para>You will be able to view and run this template from the
    'Saved templates' tab of your 'MyMine'. Access your MyMine page
    via the top menu bar on every FlyMine page.  For each template
    there are a set of actions, 'Run', 'Edit' and 'Export'. 'Run' will
    run the template query and give you a results paage.  'Edit'
    allows you to edit the template query. 'Export' will export the
    template in xml format.  In addition clicking on the star next to
    a template name (so that it turns yellow) will add that template
    to the 'Favourite templates' tab of your MyMine.</para>

       <mediaobject>
          <imageobject>
            <imagedata fileref="buildtemp-history.png" />
          </imageobject><textobject><phrase> </phrase></textobject>
        </mediaobject>
 
    <para>- The template page can be viewed and run from the 'Saved
    Templates' tab of your MyMine page.</para>

        <mediaobject>
          <imageobject>
            <imagedata fileref="buildtemp-template.png" />
          </imageobject><textobject><phrase> </phrase></textobject>
        </mediaobject>

    <para>- The template can be exported in xml format.</para> 

        <mediaobject>
          <imageobject>
            <imagedata fileref="buildtemp-export.png" />
          </imageobject><textobject><phrase> </phrase></textobject>
        </mediaobject>

  </section>
</article>

