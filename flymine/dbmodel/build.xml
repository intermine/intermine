
<project name="flymine-dbmodel" default="default" basedir=".">
  
  <description>represents the production objectstore and the model therein</description>
  <import file="../../imbuild/objectstore.xml"/>

  <target name="-merge-models" if="doing.build.db">
    <merge-additions file="bio/core/genomic_additions.xml"/>
    <merge-additions file="bio/sources/so/so_additions.xml"/>
    <merge-additions file="bio/sources/psi/psi_additions.xml"/>
    <merge-additions file="bio/sources/psi-mi-ontology/psi-mi-ontology_additions.xml"/>
    <merge-additions file="bio/sources/rnai/rnai_additions.xml"/>
    <merge-additions file="bio/sources/ensembl/ensembl_additions.xml"/>
    <merge-additions file="bio/sources/go/go_additions.xml"/>
    <merge-additions file="bio/sources/go-annotation/go-annotation_additions.xml"/>
    <merge-additions file="bio/sources/uniprot/uniprot_additions.xml"/>
    <merge-additions file="bio/sources/protein_structure/protein_structure_additions.xml"/>
    <merge-additions file="bio/sources/orthologue/orthologue_additions.xml"/>
    <merge-additions file="bio/sources/flyreg/flyreg_additions.xml"/>
    <merge-additions file="bio/sources/tiling_path/tiling_path_additions.xml"/>
    <merge-additions file="bio/sources/long_oligo/long_oligo_additions.xml"/>
    <merge-additions file="bio/sources/tiffin/tiffin_additions.xml"/>
    <merge-additions file="bio/sources/flybase-gff/flybase-gff_additions.xml"/>
    <merge-additions file="bio/sources/homophila/homophila_additions.xml"/>
    <merge-additions file="bio/sources/interpro/interpro_additions.xml"/>
    <merge-additions file="bio/sources/bdgp-clone/bdgp-clone_additions.xml"/>
    <merge-additions file="bio/sources/drosdel/drosdel_additions.xml"/>
    <merge-additions file="bio/sources/mage/mage_additions.xml"/>
    <merge-additions file="bio/sources/redfly/redfly_additions.xml"/>
    <merge-additions file="bio/sources/flyrnai-screens/flyrnai-screens_additions.xml"/>
    <merge-additions file="bio/sources/flyatlas/flyatlas_additions.xml"/>
    <merge-additions file="bio/sources/anoest/anoest_additions.xml"/>
    <merge-additions file="bio/sources/affy-probes/affy-probes_additions.xml"/>
    <merge-additions file="bio/sources/fly-anatomy-ontology/fly-anatomy-ontology_additions.xml"/>
    <merge-additions file="bio/sources/kegg-pathway/kegg-pathway_additions.xml"/>
  </target>

 <target name="generate-sitemap" depends="-init-summarise-objectstore">
    <taskdef name="generate-sitemap" classname="org.intermine.bio.util.SiteMapTask">
      <classpath refid="task.class.path"/>
    </taskdef>
    <generate-sitemap objectStore="${objectstore.name}"
                  outputFile="${dist.dir}/sitemap">
    </generate-sitemap>
    
    <gzip src="${dist.dir}/sitemap180454gene.xml" destfile="${dist.dir}/sitemap180454gene.xml.gz"/>
    <gzip src="${dist.dir}/sitemap180454protein.xml" destfile="${dist.dir}/sitemap180454protein.xml.gz"/>
    <gzip src="${dist.dir}/sitemap7227gene.xml" destfile="${dist.dir}/sitemap7227gene.xml.gz"/>
    <gzip src="${dist.dir}/sitemap7227protein.xml" destfile="${dist.dir}/sitemap7227protein.xml.gz"/>
    <gzip src="${dist.dir}/sitemap7237gene.xml" destfile="${dist.dir}/sitemap7237gene.xml.gz"/>
    <gzip src="${dist.dir}/sitemap7237protein.xml" destfile="${dist.dir}/sitemap7237protein.xml.gz"/>
    <gzip src="${dist.dir}/sitemap.xml" destfile="${dist.dir}/sitemap.xml.gz"/>

  </target>

</project>
